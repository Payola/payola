@(user: Option[cz.payola.domain.entities.User])

@import cz.payola.web.shared._
@import tags._

@detailsLinkForID(id: String, name: String) = @{
    <a href={routes.DataSource.detail(id, None).toString}>{name}</a>
}

@editLinkForID(id: String) = @{
    <a href={routes.DataSource.edit(id).toString} class="btn btn-primary"><i class="icon-pencil icon-white"></i> Edit</a>
}

@list_entities(user, "data source", "data sources", user.get.ownedDataSources, { Unit =>
    new scala.xml.NodeBuffer() += <td>Name</td>
}, { e: cz.payola.domain.Entity =>
    <td>{
        detailsLinkForID(e.id, e.asInstanceOf[cz.payola.domain.entities.plugins.DataSource].name)
    }</td>
    <td>{
        if (e.asInstanceOf[cz.payola.domain.entities.plugins.DataSource].isEditable){
            editLinkForID(e.id)
        }else{
            <span class="badge">Not editable</span>
        }
    }</td>
},
routes.DataSource.create())

